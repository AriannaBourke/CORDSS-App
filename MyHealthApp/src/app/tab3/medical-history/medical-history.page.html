<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Medical History</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <form #form="ngForm" (ngSubmit)="saveData(form)">
    <ion-card>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label class="entry-header">Medical History</ion-label>
          </ion-col>
        </ion-row>

       <ion-row>
         <ion-col>
           <ion-item>
            <ion-icon slot="start" name="medkit-outline" size="small"></ion-icon>
              <ion-select
                interface="popover"
                placeholder="Diagnosis"
                [(ngModel)]="data.diagnosis"
                name="diagnosis"
              >
                <ion-select-option value="Uveitis">Uveitis</ion-select-option>
                <ion-select-option value="Uveitis2">Uveitis2</ion-select-option>
                <ion-select-option value="Uveitis3">Uveitis3</ion-select-option>
                <ion-select-option value="Uveitis4">Uveitis4</ion-select-option>
                <ion-select-option value="Other">Other</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>

       <ion-row>
         <ion-col>
           <ion-item>
            <ion-icon slot="start" name="document-text-outline" size="small"></ion-icon>
            <ion-textarea
            type="text"
            placeholder="Details about diagnosis"
            [(ngModel)]="data.diagnosis_details"
            name="diagnosis_details"
          ></ion-textarea>
        </ion-item>
      </ion-col>
    </ion-row>

       <ion-row>
        <ion-col>
          <ion-item>
            <ion-icon slot="start" name="calendar-number-outline" size="small"></ion-icon>
            <ion-datetime
            displayFormat="DD MMMM YYYY"
            placeholder="Diagnosis Date"
            [(ngModel)]="data.diagnosis_date"
            name="diagnosis_date"
          ></ion-datetime>
        </ion-item>
      </ion-col>
    </ion-row>


       <ion-row>
        <ion-col>
          <ion-item>
            <ion-icon slot="start" name="pencil-outline" size="small"></ion-icon>
            <ion-textarea
            type="text"
            placeholder="Notes"
            [(ngModel)]="data.notes"
            name="notes"
          ></ion-textarea>
          </ion-item>
          <div class="ion-margin-vertical ion-text-right">
            <ion-button
              type="button"
              size="small"
              type="submit"
              value="submit"
              id="submit"
            >
              <ion-icon slot="start" name="add"></ion-icon>Submit</ion-button
            >
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
</form>

<ion-list *ngFor="let history of medicalhistory; let i = index" class="list">
  <ion-card>
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-label class="entry-header">Medical History</ion-label>
          <ion-icon
            style="float: right"
            name="trash-outline"
            size="large"
            (click)="removeData(history.rowid)"
          ></ion-icon>
          <ion-icon
            style="float: right"
            name="paper"
            size="large"
            (click)="editData(history.rowid)"
          ></ion-icon>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item>
            <ion-icon
              slot="start"
              name="medkit-outline"
              size="small"
            ></ion-icon>
            <p>{{history.diagnosis}}</p>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item>
            <ion-icon
              slot="start"
              name="document-text-outline"
              size="small"
            ></ion-icon>
            <p>{{history.diagnosis_details}}</p>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item>
            <ion-icon
              slot="start"
              name="calendar-number-outline"
              size="small"
            ></ion-icon>
            <p>{{history.diagnosis_date | date: 'dd MMMM y'}}</p>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item>
            <p>{{history.notes}}</p>
            <ion-icon
              slot="start"
              name="pencil-outline"
              size="small"
            ></ion-icon>
          </ion-item>
        </ion-col>
      </ion-row>

    </ion-grid>
  </ion-card>
</ion-list>
</ion-content>
